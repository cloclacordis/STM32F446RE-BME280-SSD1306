@startuml

skinparam backgroundColor #F6FBFB
skinparam shadowing true
skinparam roundcorner 8
skinparam defaultFontName "DejaVu Sans"
skinparam defaultFontSize 12
skinparam componentStyle rectangle

skinparam rectangle {
  BackgroundColor<<System>> #E9F5F2
  BorderColor<<System>> #7FBFA6

  BackgroundColor<<BSP>> #FFF8E6
  BorderColor<<BSP>> #E6C07D

  BackgroundColor<<Peripheral>> #F2F7FF
  BorderColor<<Peripheral>> #9AB4FF

  BackgroundColor<<Driver>> #F5F5F5
  BorderColor<<Driver>> #BDBDBD

  BackgroundColor<<App>> #FFF5F5
  BorderColor<<App>> #F2A0A0
}

package "System Layer" {
  [startup.s] as startup
  [linker.ld] as linker
}

package "Board Support" {
  [board_config.h] as board_cfg
}

package "Peripheral Drivers" {
  [i2c_driver] as i2c_ll
  [uart_driver] as uart_ll
}

package "Device Drivers" {
  [bme280_driver] as bme280
  [ssd1306_driver] as ssd1306
}

package "Application" {
  [main.c] as mainc
  [app_logic] as app_logic
}

linker <.. startup : init

startup <.. mainc : entry
mainc --> app_logic : run

app_logic ==> bme280 : read
app_logic ==> ssd1306 : update
app_logic ==> uart_ll : send

bme280 --> i2c_ll : I2C
ssd1306 --> i2c_ll : I2C

i2c_ll --> board_cfg : cfg
uart_ll --> board_cfg : cfg

board_cfg ..> linker : setup
board_cfg <.. mainc : cfg

@enduml
